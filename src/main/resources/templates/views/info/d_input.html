<!DOCTYPE html SYSTEM "http://www.thymeleaf.org/dtd/xhtml1-strict-thymeleaf-4.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <title>电汇信息录入</title>
    <base th:href="${#request.getContextPath()}+'/'">
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link rel="stylesheet" href="layuiadmin/layui/css/jquery-editable-select.css"/>
    <link rel="stylesheet" href="layuiadmin/layui/css/layui.css" media="all">
</head>
<body>

<fieldset class="layui-elem-field layui-field-title" style="margin-top: 20px;">
    <legend>电汇信息录入</legend>
</fieldset>

<form class="layui-form layui-form-pane" id="com_pay_record" action="">
    <div class="layui-form-item layui-row">
        <div class="layui-col-xs6 layui-col-sm6 layui-col-md3">
            <label class="layui-form-label">凭证号</label>
            <div class="layui-input-block">
                <input name="no" id="no" class="layui-input" type="text" placeholder="请输入凭证号">
            </div>
        </div>
        <div class="layui-col-xs6 layui-col-sm6 layui-col-md6">
            <label class="layui-form-label">收款单位</label>
            <div class="layui-input-block">
                <!--<input name="name"  onkeydown="don()" id="name" class="layui-input" type="text" autocomplete="off" placeholder="请输入收款单位"
                       oninput="" style="position: absolute;z-index: 2;width: 94%">
                <select id="company" lay-filter="gs_select" οnkeydοwn="don()" lay-search></select>-->
                <select name="name" id="editable-select" class="layui-input" style="background-color: white"></select>
            </div>
        </div>
    </div>
    <div class="layui-form-item layui-row">
        <div class="layui-col-xs6 layui-col-sm6 layui-col-md3">
            <label class="layui-form-label">付款项目</label>
            <div class="layui-input-block">
                <input name="pName" id="pName" class="layui-input" type="text" placeholder="请输入付款项目">
            </div>
        </div>
        <div class="layui-col-xs6 layui-col-sm6 layui-col-md3">
            <label class="layui-form-label">付款金额</label>
            <div class="layui-input-block">
                <input name="pMoney" id="pMoney" class="layui-input" type="text" placeholder="￥" lay-verify="validateMoney">
            </div>
        </div>
        <div class="layui-col-xs6 layui-col-sm6 layui-col-md3">
            <label class="layui-form-label">付款方式</label>
            <div class="layui-input-block">
                <input name="rNo" id="rNo" class="layui-input" type="text" placeholder="请输入付款方式">
            </div>
        </div>
    </div>
    <div class="layui-form-item layui-row">
        <div class="layui-col-xs6 layui-col-sm6 layui-col-md3">
            <label class="layui-form-label">付款时间</label>
            <div class="layui-input-block">
                <input name="pTime" class="layui-input" id="pTime" type="text" placeholder="yyyy-MM-dd"
                       autocomplete="off" lay-verify="date">
            </div>
        </div>
        <div class="layui-col-xs6 layui-col-sm6 layui-col-md6">
            <label class="layui-form-label">付款内容</label>
            <div class="layui-input-block">
                <input name="content" id="content" class="layui-input" type="text" autocomplete="off" placeholder="请输入付款内容">
            </div>
        </div>
    </div>
    <!--<div class="layui-form-item">
        <label class="layui-form-label">验证必填项</label>
        <div class="layui-input-block">
            <input name="username" class="layui-input" type="text" placeholder="请输入" autocomplete="off" lay-verify="required" lay-reqtext="用户名是必填项，岂能为空？">
        </div>
    </div>

    <div class="layui-form-item">
        <div class="layui-inline">
            <label class="layui-form-label">验证手机</label>
            <div class="layui-input-inline">
                <input name="phone" class="layui-input" type="tel" autocomplete="off" lay-verify="required|phone">
            </div>
        </div>
        <div class="layui-inline">
            <label class="layui-form-label">验证邮箱</label>
            <div class="layui-input-inline">
                <input name="email" class="layui-input" type="text" autocomplete="off" lay-verify="email">
            </div>
        </div>
    </div>

    <div class="layui-form-item">
        <div class="layui-inline">
            <label class="layui-form-label">多规则验证</label>
            <div class="layui-input-inline">
                <input name="number" class="layui-input" type="text" autocomplete="off" lay-verify="required|number">
            </div>
        </div>
        <div class="layui-inline">
            <label class="layui-form-label">验证日期</label>
            <div class="layui-input-inline">
                <input name="date" class="layui-input" id="date" type="text" placeholder="yyyy-MM-dd" autocomplete="off" lay-verify="date">
            </div>
        </div>
        <div class="layui-inline">
            <label class="layui-form-label">验证链接</label>
            <div class="layui-input-inline">
                <input name="url" class="layui-input" type="tel" autocomplete="off" lay-verify="url">
            </div>
        </div>
    </div>

    <div class="layui-form-item">
        <label class="layui-form-label">验证身份证</label>
        <div class="layui-input-block">
            <input name="identity" class="layui-input" type="text" placeholder="" autocomplete="off" lay-verify="identity">
        </div>
    </div>
    <div class="layui-form-item">
        <label class="layui-form-label">自定义验证</label>
        <div class="layui-input-inline">
            <input name="password" class="layui-input" type="password" placeholder="请输入密码" autocomplete="off" lay-verify="pass">
        </div>
        <div class="layui-form-mid layui-word-aux">请填写6到12位密码</div>
    </div>

    <div class="layui-form-item">
        <div class="layui-inline">
            <label class="layui-form-label">范围</label>
            <div class="layui-input-inline" style="width: 100px;">
                <input name="price_min" class="layui-input" type="text" placeholder="￥" autocomplete="off">
            </div>
            <div class="layui-form-mid">-</div>
            <div class="layui-input-inline" style="width: 100px;">
                <input name="price_max" class="layui-input" type="text" placeholder="￥" autocomplete="off">
            </div>
        </div>
    </div>

    <div class="layui-form-item">
        <label class="layui-form-label">单行选择框</label>
        <div class="layui-input-block">
            <select name="interest" lay-filter="aihao">
                <option value=""></option>
                <option value="0">写作</option>
                <option value="1" selected="">阅读</option>
                <option value="2">游戏</option>
                <option value="3">音乐</option>
                <option value="4">旅行</option>
            </select>
        </div>
    </div>


    <div class="layui-form-item">
        <div class="layui-inline">
            <label class="layui-form-label">分组选择框</label>
            <div class="layui-input-inline">
                <select name="quiz">
                    <option value="">请选择问题</option>
                    <optgroup label="城市记忆">
                        <option value="你工作的第一个城市">你工作的第一个城市</option>
                    </optgroup>
                    <optgroup label="学生时代">
                        <option value="你的工号">你的工号</option>
                        <option value="你最喜欢的老师">你最喜欢的老师</option>
                    </optgroup>
                </select>
            </div>
        </div>
        <div class="layui-inline">
            <label class="layui-form-label">搜索选择框</label>
            <div class="layui-input-inline">
                <select name="modules" lay-search="" lay-verify="required">
                    <option value="">直接选择或搜索选择</option>
                    <option value="1">layer</option>
                    <option value="2">form</option>
                    <option value="3">layim</option>
                    <option value="4">element</option>
                    <option value="5">laytpl</option>
                    <option value="6">upload</option>
                    <option value="7">laydate</option>
                    <option value="8">laypage</option>
                    <option value="9">flow</option>
                    <option value="10">util</option>
                    <option value="11">code</option>
                    <option value="12">tree</option>
                    <option value="13">layedit</option>
                    <option value="14">nav</option>
                    <option value="15">tab</option>
                    <option value="16">table</option>
                    <option value="17">select</option>
                    <option value="18">checkbox</option>
                    <option value="19">switch</option>
                    <option value="20">radio</option>
                </select>
            </div>
        </div>
    </div>

    <div class="layui-form-item">
        <label class="layui-form-label">联动选择框</label>
        <div class="layui-input-inline">
            <select name="quiz1">
                <option value="">请选择省</option>
                <option value="浙江" selected="">浙江省</option>
                <option value="你的工号">江西省</option>
                <option value="你最喜欢的老师">福建省</option>
            </select>
        </div>
        <div class="layui-input-inline">
            <select name="quiz2">
                <option value="">请选择市</option>
                <option value="杭州">杭州</option>
                <option disabled="" value="宁波">宁波</option>
                <option value="温州">温州</option>
                <option value="温州">台州</option>
                <option value="温州">绍兴</option>
            </select>
        </div>
        <div class="layui-input-inline">
            <select name="quiz3">
                <option value="">请选择县/区</option>
                <option value="西湖区">西湖区</option>
                <option value="余杭区">余杭区</option>
                <option value="拱墅区">临安市</option>
            </select>
        </div>
        <div class="layui-form-mid layui-word-aux">此处只是演示联动排版，并未做联动交互</div>
    </div>

    <div class="layui-form-item">
        <label class="layui-form-label">复选框</label>
        <div class="layui-input-block">
            <input name="like[write]" title="写作" type="checkbox">
            <input name="like[read]" title="阅读" type="checkbox" checked="">
            <input name="like[game]" title="游戏" type="checkbox">
        </div>
    </div>

    <div class="layui-form-item" pane="">
        <label class="layui-form-label">原始复选框</label>
        <div class="layui-input-block">
            <input name="like1[write]" title="写作" type="checkbox" checked="" lay-skin="primary">
            <input name="like1[read]" title="阅读" type="checkbox" lay-skin="primary">
            <input name="like1[game]" title="游戏" disabled="" type="checkbox" lay-skin="primary">
        </div>
    </div>

    <div class="layui-form-item">
        <label class="layui-form-label">开关-默认关</label>
        <div class="layui-input-block">
            <input name="close" type="checkbox" lay-skin="switch" lay-text="ON|OFF">
        </div>
    </div>
    <div class="layui-form-item">
        <label class="layui-form-label">开关-默认开</label>
        <div class="layui-input-block">
            <input name="open" type="checkbox" checked="" lay-filter="switchTest" lay-skin="switch" lay-text="ON|OFF">
        </div>
    </div>
    <div class="layui-form-item">
        <label class="layui-form-label">单选框</label>
        <div class="layui-input-block">
            <input name="sex" title="男" type="radio" checked="" value="男">
            <input name="sex" title="女" type="radio" value="女">
            <input name="sex" title="禁用" disabled="" type="radio" value="禁">
        </div>
    </div>
    <div class="layui-form-item layui-form-text">
        <label class="layui-form-label">普通文本域</label>
        <div class="layui-input-block">
            <textarea class="layui-textarea" placeholder="请输入内容"></textarea>
        </div>
    </div>-->
    <div class="layui-form-item">
        <div class="layui-input-block">
<!--            <button class="layui-btn" type="submit" lay-filter="demo1" lay-submit="">立即提交</button>-->
            <button id="compay" class="layui-btn" type="submit" lay-filter="compay" lay-submit="">生成付款登记表</button>
            <button class="layui-btn layui-btn-primary" type="reset">重置</button>
        </div>
    </div>
</form>

<!-- 示例-970 -->
<!--<ins class="adsbygoogle" style="display:inline-block;width:970px;height:90px" data-ad-slot="3820120620" data-ad-client="ca-pub-6111334333458862"></ins>-->

<!--<fieldset class="layui-elem-field layui-field-title" style="margin-top: 50px;">
    <legend>赋值和取值</legend>
</fieldset>-->

<!--<form class="layui-form" action="" lay-filter="example">
    <div class="layui-form-item">
        <label class="layui-form-label">输入框</label>
        <div class="layui-input-block">
            <input name="username" class="layui-input" type="text" placeholder="请输入标题" autocomplete="off"
                   lay-verify="title">
        </div>
    </div>
    <div class="layui-form-item">
        <label class="layui-form-label">密码框</label>
        <div class="layui-input-block">
            <input name="password" class="layui-input" type="password" placeholder="请输入密码" autocomplete="off">
        </div>
    </div>

    <div class="layui-form-item">
        <label class="layui-form-label">选择框</label>
        <div class="layui-input-block">
            <select name="interest" lay-filter="aihao">
                <option value=""></option>
                <option value="0">写作</option>
                <option value="1">阅读</option>
                <option value="2">游戏</option>
                <option value="3">音乐</option>
                <option value="4">旅行</option>
            </select>
        </div>
    </div>

    <div class="layui-form-item">
        <label class="layui-form-label">复选框</label>
        <div class="layui-input-block">
            <input name="like[write]" title="写作" type="checkbox">
            <input name="like[read]" title="阅读" type="checkbox">
            <input name="like[daze]" title="发呆" type="checkbox">
        </div>
    </div>

    <div class="layui-form-item">
        <label class="layui-form-label">开关</label>
        <div class="layui-input-block">
            <input name="close" type="checkbox" lay-skin="switch" lay-text="ON|OFF">
        </div>
    </div>

    <div class="layui-form-item">
        <label class="layui-form-label">单选框</label>
        <div class="layui-input-block">
            <input name="sex" title="男" type="radio" checked="" value="男">
            <input name="sex" title="女" type="radio" value="女">
        </div>
    </div>
    <div class="layui-form-item layui-form-text">
        <label class="layui-form-label">文本域</label>
        <div class="layui-input-block">
            <textarea name="desc" class="layui-textarea" placeholder="请输入内容"></textarea>
        </div>
    </div>

    <div class="layui-form-item">
        <div class="layui-input-block">
            <button class="layui-btn layui-btn-normal" id="LAY-component-form-setval" type="button">赋值</button>
            <button class="layui-btn layui-btn-normal" id="LAY-component-form-getval" type="button">取值</button>
            <button class="layui-btn" type="submit" lay-filter="demo1" lay-submit="">立即提交</button>
        </div>
    </div>
</form>-->
<!--<fieldset class="layui-elem-field layui-field-title" style="margin-top: 50px;">
    <legend>电汇信息录入</legend>
</fieldset>-->
<!--<form class="layui-form layui-form-pane" action="">
    <div class="layui-form-item">
        <label class="layui-form-label">长输入框</label>
        <div class="layui-input-block">
            <input name="title" class="layui-input" type="text" placeholder="请输入标题" autocomplete="off">
        </div>
    </div>
    <div class="layui-form-item">
        <label class="layui-form-label">短输入框</label>
        <div class="layui-input-inline">
            <input name="username" class="layui-input" type="text" placeholder="请输入" autocomplete="off"
                   lay-verify="required">
        </div>
    </div>

    <div class="layui-form-item">
        <div class="layui-inline">
            <label class="layui-form-label">日期选择</label>
            <div class="layui-input-block">
                <input name="date" class="layui-input" id="date1" type="text" autocomplete="off">
            </div>
        </div>
        <div class="layui-inline">
            <label class="layui-form-label">行内表单</label>
            <div class="layui-input-inline">
                <input name="number" class="layui-input" type="text" autocomplete="off">
            </div>
        </div>
    </div>
    <div class="layui-form-item">
        <label class="layui-form-label">密码</label>
        <div class="layui-input-inline">
            <input name="password" class="layui-input" type="password" placeholder="请输入密码" autocomplete="off">
        </div>
        <div class="layui-form-mid layui-word-aux">请务必填写用户名</div>
    </div>

    <div class="layui-form-item">
        <div class="layui-inline">
            <label class="layui-form-label">范围</label>
            <div class="layui-input-inline" style="width: 100px;">
                <input name="price_min" class="layui-input" type="text" placeholder="￥" autocomplete="off">
            </div>
            <div class="layui-form-mid">-</div>
            <div class="layui-input-inline" style="width: 100px;">
                <input name="price_max" class="layui-input" type="text" placeholder="￥" autocomplete="off">
            </div>
        </div>
    </div>

    <div class="layui-form-item">
        <label class="layui-form-label">单行选择框</label>
        <div class="layui-input-block">
            <select name="interest" lay-filter="aihao">
                <option value=""></option>
                <option value="0">写作</option>
                <option value="1" selected="">阅读</option>
                <option value="2">游戏</option>
                <option value="3">音乐</option>
                <option value="4">旅行</option>
            </select>
        </div>
    </div>

    <div class="layui-form-item">
        <label class="layui-form-label">行内选择框</label>
        <div class="layui-input-inline">
            <select name="quiz1">
                <option value="">请选择省</option>
                <option value="浙江" selected="">浙江省</option>
                <option value="你的工号">江西省</option>
                <option value="你最喜欢的老师">福建省</option>
            </select>
        </div>
        <div class="layui-input-inline">
            <select name="quiz2">
                <option value="">请选择市</option>
                <option value="杭州">杭州</option>
                <option disabled="" value="宁波">宁波</option>
                <option value="温州">温州</option>
                <option value="温州">台州</option>
                <option value="温州">绍兴</option>
            </select>
        </div>
        <div class="layui-input-inline">
            <select name="quiz3">
                <option value="">请选择县/区</option>
                <option value="西湖区">西湖区</option>
                <option value="余杭区">余杭区</option>
                <option value="拱墅区">临安市</option>
            </select>
        </div>
    </div>
    <div class="layui-form-item" pane="">
        <label class="layui-form-label">开关-开</label>
        <div class="layui-input-block">
            <input name="open" title="开关" type="checkbox" checked="" lay-filter="switchTest" lay-skin="switch">
        </div>
    </div>
    <div class="layui-form-item" pane="">
        <label class="layui-form-label">单选框</label>
        <div class="layui-input-block">
            <input name="sex" title="男" type="radio" checked="" value="男">
            <input name="sex" title="女" type="radio" value="女">
            <input name="sex" title="禁用" disabled="" type="radio" value="禁">
        </div>
    </div>
    <div class="layui-form-item layui-form-text">
        <label class="layui-form-label">文本域</label>
        <div class="layui-input-block">
            <textarea class="layui-textarea" placeholder="请输入内容"></textarea>
        </div>
    </div>
    <div class="layui-form-item">
        <button class="layui-btn" lay-filter="demo2" lay-submit="">跳转式提交</button>
    </div>
</form>-->

<script src="layuiadmin/layui/layui.js" charset="UTF-8"></script>
<script src="layuiadmin/lib/jquery-3.5.0.js"></script>
<script src="layuiadmin/lib/jquery-editable-select.js"></script>
<script>
    layui.use(['form', 'layedit', 'laydate'], function () {
        var $ = layui.$, form = layui.form, layer = layui.layer, layedit = layui.layedit, laydate = layui.laydate;

        //日期
        laydate.render({
            elem: '#date'
        });
        laydate.render({
            elem: '#pTime'
        });

        //自定义验证规则
        form.verify({
            title: function (value) {
                if (value.length < 5) {
                    return '标题至少得5个字符啊';
                }
            }
            , pass: [
                /^[\S]{6,12}$/
                , '密码必须6到12位，且不能出现空格'
            ]
            , content: function (value) {
                layedit.sync(editIndex);
            }
        });

        //监听指定开关
        form.on('switch(switchTest)', function (data) {
            layer.msg('开关checked：' + (this.checked ? 'true' : 'false'), {
                offset: '6px'
            });
            layer.tips('温馨提示：请注意开关状态的文字可以随意定义，而不仅仅是ON|OFF', data.othis)
        });

        //监听提交
        form.on('submit(compay)', function (data) {
            // var data = JSON.stringify(data.field)
            return false;
        });

        $("#compay").click(function () {
            var fdata = $("#com_pay_record").serialize();
            $.ajax({
                url: 'compay/insert',
                type: 'POST',
                dataType: 'json',
                data: fdata, //ajax方法发送formData对象
                success: function (data) {
                    if (data.code == 200){
                        layer.open({type: 1, offset: 'auto', content: '<div style="padding: 20px 100px;">'+ data.msg +'</div>'
                            , btn: '关闭', btnAlign: 'c', yes: function(){
                                layer.closeAll();
                            }
                        });
                    }else {
                        layer.open({type: 1, offset: 'auto', content: '<div style="padding: 20px 100px;">'+ data.msg +'</div>'
                            , btn: '关闭', btnAlign: 'c', yes: function(){
                                layer.closeAll();
                            }
                        });
                    }
                },
                error: function () {
                }
            });
        })

        //设置select 与 input 输入框联动
        form.on('select(gs_select)',function (obj) {
            //obj有 每一个option的值，有兴趣的可以再次打印然后看obj的结构
            $("#name").val(obj.value); //这里直接将obj的值设置给input框达到选择input时让它俩联动起来
            $("#company").next().find("dl").css({"display":"none"});
            form.render();
        })

        //给input框加监听
        $("#editable-select").on('input',function () {
            var name = $("#editable-select").val();
            if(name.match(/^[\u4e00-\u9fa5]+$/)){
                $.ajax({
                    "url": "company/tensl",
                    "data": "name="+name,
                    "type": "GET",
                    "dataType": "json",
                    "success": function (name) {
                        $(".es-list").children().remove();
                        $(".es-list").css("display","block");
                        var num = 1;
                        for (var i in name) {
                            if (num == 1){
                                var option = $('<li class="es-visible selected">').html(name[i]);
                                num = 2;
                            }else {
                                var option = $('<li class="es-visible">').html(name[i]);
                            }
                            $(".es-list").append(option);
                        }
                        // form.render();
                        // $("#company").next().find(".layui-select-title input").click();
                        // $("#company").next().find("dl").css({ "display": "block" });
                    },
                    "error": function () {
                    }
                });
            }
        })

        //表单赋值
        layui.$('#LAY-component-form-setval').on('click', function () {
            form.val('example', {
                "username": "贤心" // "name": "value"
                , "password": "123456"
                , "interest": 1
                , "like[write]": true //复选框选中状态
                , "close": true //开关状态
                , "sex": "女"
                , "desc": "我爱 layui"
            });
        });

        //表单取值
        layui.$('#LAY-component-form-getval').on('click', function () {
            var data = form.val('example');
            alert(JSON.stringify(data));
        });

        //自定义表单验证（金额）
        form.verify({
            validateMoney: [
                /(^$)|(^[1-9]([0-9]+)?(\.[0-9]{1,2})?$)|(^(0){1}$)|(^[0-9]\.[0-9]([0-9])?$)/ //正则表达式
                ,'请输入正确的金额' //提示信息
            ]
        });
        
        /*$(function(){
            var url = window.location.href;
            console.log(url)
        })*/
    });
</script>
<script>
    $('#editable-select').editableSelect({
        effects: 'slide',   //下拉列表出来的方式
        effects: 200  //时间
    });
</script>
</body>
</html>